var mobile={l:base.l(),rem:(document,window,!1),versions:function(){var i=navigator.userAgent;navigator.appVersion;return{weixin:i.toLowerCase().indexOf("micromessenger")>-1,trident:i.indexOf("Trident")>-1,presto:i.indexOf("Presto")>-1,webKit:i.indexOf("AppleWebKit")>-1,gecko:i.indexOf("Gecko")>-1&&-1==i.indexOf("KHTML"),mobile:!!(i.match(/AppleWebKit.*Mobile/)||i.match(/Windows Phone/)||i.match(/Android/)||i.match(/MQQBrowser/)),ios:!!i.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:i.indexOf("Android")>-1||i.indexOf("Linux")>-1,iPhone:i.indexOf("iPhone")>-1||i.indexOf("Mac")>-1,iPad:i.indexOf("iPad")>-1,webApp:-1==i.indexOf("Safari")}}(),orChange:function(i,n){$("body").append('<div class="orientation-warn"><div class="orientation-warn-wrapper"><span class="orientation-warn-icon"></span>为了更好的体验，请使用竖屏浏览</div></div>'),$or=$(".orientation-warn"),window.addEventListener("onorientationchange"in window?"orientationchange":"resize",function(){var e=window.orientation;180!=e&&0!=e||($or.hide(),i&&i()),90!==e&&-90!==e||($or.show(),n&&n())},!1)},config:function(i){$.getScript("http://res.wx.qq.com/open/js/jweixin-1.0.0.js",function(){$.getJSON(mobile.l.hd+"active_weixin_jssdk_0.html?jsoncallback=?&http_url="+encodeURIComponent(mobile.l.self),function(n){wx.config({debug:!1,appId:n.appId,timestamp:n.timestamp,nonceStr:n.nonceStr,signature:n.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","hideMenuItems"]}),i&&i()})})},corner:function(i,n){$("body").append('<div id="corner-'+n+'" style="display:none;position:fixed;left:0;top:0;width:100%;height:100%;overflow:hidden;z-index:99999"><div style="width:100%;height:100%;background:#000;opacity:0.8"></div><img style="position:absolute;top:0;left:0;width:100%" src="http://pic.51wan.com/app/global/'+n+'.png"></div>');var e=$("#corner-"+n);i.tap(function(){return e.show(),!1}),e.tap(function(){return $(this).hide(),!1})},resizePosition:function(i,n,e){var o=obj?$(obj+" .resize"):$(".resize"),t=obj?$(obj+" .position"):$(".position"),a=e<500?.8:e>=500&&e<600?.9:1,s=function(n,e){return parseInt(n)*i*e},c=function(i,n){return n&&i==n?"c":parseInt(i)};o.each(function(e,o){var t=$(o),c=t.width(),d=t.height();a=c*i==n?1:a;var r=Math.round(c*i*a),l=Math.round(d*i*a),r=0==r?"auto":r,l=0==l?"auto":l,p=parseInt(s(t.css("font-size"),a)),h=parseInt(s(t.css("line-height"),a));t.width(r).height(l).css({fontSize:p,lineHeight:h+"px"})}),t.each(function(o,t){var s=$(t),d=s.css("display"),r={display:d};s.css({position:"absolute"}).show();var l=s.width(),p=s.height();s.hide();var h=c(s.css("top")),u=c(s.css("bottom")),v=c(s.css("left"),s.css("right")),m=c(s.css("right"));"c"==v?r.left=.5*(n-l):isNaN(v)?(r.left=n-l-m*i,r.right="auto"):r.left=v*i*a,"c"==h?r.top=.5*(e-p):isNaN(h)?(r.top=e-p-u*i,r.bottom="auto"):r.top=h*i*a,s.css(r)})},wxShare:function(i){wx.ready(function(){wx.onMenuShareTimeline(i),wx.onMenuShareAppMessage(i),wx.onMenuShareQQ(i),wx.onMenuShareWeibo(i)})},spinner:function(i){var n=$(".spinners");n[0]||($("body").append('<div class="spinnermask spinners"></div><div class="spinnerbox spinners"><div class="spinner"><div class="spinner-container container1"><div class="circle1"></div><div class="circle2"></div><div class="circle3"></div><div class="circle4"></div></div><div class="spinner-container container2"><div class="circle1"></div><div class="circle2"></div><div class="circle3"></div><div class="circle4"></div></div><div class="spinner-container container3"><div class="circle1"></div><div class="circle2"></div><div class="circle3"></div><div class="circle4"></div></div></div></div>'),mobile.spinner(i)),i?n.show():n.hide()},tips:function(i,n,e){var o=$("#common-tipsbox");if(o.length){o.show();var t=o.find(".common-tipscontent");o.find(".common-tipsh").html(i||""),o.find(".common-tipsp").html(n||""),t.css("margin-top",t.outerHeight()/-2),o.find(".common-tipsbtn").on("tap",function(){event.preventDefault(),$(this).off("tap"),o.hide(100),e&&e()})}else $("body").append('<div id="common-tipsbox"><div class="common-tipsmask"></div><div class="common-tipscontent"><p class="common-tipsh">'+i+'</p><p class="common-tipsp">'+n+'</p><input class="common-tipsbtn" type="button" value="确定"></div></div>'),mobile.tips(i,n,e)},auth:function(i,n,e){var o=base.linkPar("uid"),t=base.linkPar("hdid"),a=base.cookie("wx_uid");i?a&&t&&o&&a==o?n?$.getJSON(mobile.l.hd+n+"?jsoncallback=?",{hdid:t,uid:o},function(n){1==n.unauth?mobile.authBack("",i):2==n.unauth?mobile.authBack(t,i):mobile.loading(function(){e(o,t,n)})}):mobile.loading(function(){e(o)}):mobile.authBack(t,i):mobile.loading(function(){e(o)})},authBack:function(i,n){var e=mobile.l.self.replace(/\?\S*/,"");i=i||"",location.href=mobile.l.hd+n+"?hdid="+i+"&hdurl="+encodeURI(e)},loading:function(i){var n=$("#wrap"),e=$("html,body"),o=$(".img-loading-list-none"),t=$(".loading-page"),a=$(".loading-progress"),s=$(".loading-img"),c=$(".loading-mask"),d=[],r=/url\("?(\S*[^"])"?\)/;o.each(function(i,n){$(n).addClass("img-loading-list").removeClass("img-loading-list-none");var e=$(n).css("background-image");d[i]=r.exec(e)[1]}),imgLoad.loading(d,function(i,n,e,o){var t=parseInt(n/i*100);c.height(s.height()*t/100),a.text(t+"%")},function(o){t.fadeOut(500,function(){e.addClass("loading-page-html"),n.show(),mobile.orChange(),i()})})}};